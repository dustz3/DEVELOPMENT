# Netlify Configuration for TailorMed track

[build]
  # 建置命令 - 編譯 Pug 和 Stylus
  command = "cd src/Projects/TailorMed/track && node compile.js"
  
  # 發布目錄（相對於 repository root）
  publish = "dist/Projects/TailorMed/track"
  
  # Netlify Functions 目錄（相對於 repository root）
  functions = "src/Projects/TailorMed/track/backend/netlify/functions"

# 環境變數（本地開發時從 .env 檔案讀取）
# 注意：.env 檔案應該在 backend 目錄下
# Netlify dev 會自動讀取 backend/.env（如果存在）

# 重定向規則
[[redirects]]
  from = "/api/tracking"
  to = "/.netlify/functions/tracking"
  status = 200

[[redirects]]
  from = "/api/tracking-public"
  to = "/.netlify/functions/tracking"
  status = 200

[[redirects]]
  from = "/api/health"
  to = "/.netlify/functions/tracking"
  status = 200

[[redirects]]
  from = "/design"
  to = "/design_ui.html"
  status = 200

[[redirects]]
  from = "/basic"
  to = "/basic.html"
  status = 200

[[redirects]]
  from = "/standard"
  to = "/standard.html"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# 安全標頭
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    X-XSS-Protection = "1; mode=block"
    Referrer-Policy = "strict-origin-when-cross-origin"
